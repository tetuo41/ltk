---
import type { LayoutProps } from '@/types';

export interface Props extends LayoutProps {}

const { 
  title, 
  description = "League The k4sen (LTK) 2025 - 精霊の花祭り 幽明の境", 
  keywords = ["League of Legends", "k4sen", "LTK", "tournament", "LoL", "streamer", "championship"],
  ogImage = "/og-image.jpg",
  canonicalUrl 
} = Astro.props;

const keywordsString = keywords.join(", ");
const currentUrl = canonicalUrl || Astro.url.href;

// Structured data for SEO
const structuredData = {
  "@context": "https://schema.org",
  "@type": "SportsEvent",
  "name": "League The k4sen 2025 - 精霊の花祭り 幽明の境",
  "description": description,
  "url": currentUrl,
  "startDate": "2025-06-25T19:00:00+09:00",
  "endDate": "2025-08-27T23:00:00+09:00",
  "location": {
    "@type": "VirtualLocation",
    "url": "https://ltk-sbb.shiai.games"
  },
  "organizer": {
    "@type": "Person",
    "name": "k4sen",
    "url": "https://twitter.com/thek4sen"
  },
  "sponsor": {
    "@type": "Organization",
    "name": "Riot Games",
    "url": "https://www.riotgames.com/"
  },
  "sport": "League of Legends",
  "eventStatus": "https://schema.org/EventScheduled",
  "eventAttendanceMode": "https://schema.org/OnlineEventAttendanceMode",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "JPY",
    "availability": "https://schema.org/InStock"
  },
  "image": ogImage,
  "performer": [
    {
      "@type": "SportsTeam",
      "name": "Precision Diadem",
      "identifier": "precision_diadem",
      "sport": "League of Legends",
      "memberOf": {
        "@type": "SportsOrganization",
        "name": "League The k4sen 2025"
      }
    },
    {
      "@type": "SportsTeam", 
      "name": "Domination Crown",
      "identifier": "domination_crown",
      "sport": "League of Legends",
      "memberOf": {
        "@type": "SportsOrganization",
        "name": "League The k4sen 2025"
      }
    },
    {
      "@type": "SportsTeam",
      "name": "Sorcery Tiara",
      "identifier": "sorcery_tiara",
      "sport": "League of Legends",
      "memberOf": {
        "@type": "SportsOrganization",
        "name": "League The k4sen 2025"
      }
    },
    {
      "@type": "SportsTeam",
      "name": "Resolve Regalia",
      "identifier": "resolve_regalia",
      "sport": "League of Legends",
      "memberOf": {
        "@type": "SportsOrganization",
        "name": "League The k4sen 2025"
      }
    }
  ]
};

// FAQ structured data for better search visibility (Google 2024 SEO guidelines)
const faqStructuredData = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "League The k4sen (LTK) 2025とは何ですか？",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "LTK 2025は、k4sen主催のLeague of Legendsストリーマー大会です。4チーム20人の配信者が参加し、CORE部門とNEXT部門に分かれて競います。"
      }
    },
    {
      "@type": "Question", 
      "name": "大会の開催期間はいつですか？",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "レギュラーシーズンは2025年6月25日から8月13日まで、プレイオフは8月20日から8月27日まで開催されます。"
      }
    },
    {
      "@type": "Question",
      "name": "CORE部門とNEXT部門の違いは何ですか？",
      "acceptedAnswer": {
        "@type": "Answer", 
        "text": "CORE部門はランクダイヤモンド以上の上級者部門、NEXT部門はランクゴールド以下の初心者向け部門です。それぞれ異なるレベルで競技が行われます。"
      }
    },
    {
      "@type": "Question",
      "name": "配信はどこで見ることができますか？",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "各選手の個人配信チャンネルやk4senの公式配信で視聴できます。詳細な配信情報は公式サイトでご確認ください。"
      }
    },
    {
      "@type": "Question",
      "name": "統計データはどこで確認できますか？",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "本サイトの統計ページで選手成績、チーム分析、チャンピオン使用率などの詳細データをご覧いただけます。"
      }
    }
  ]
};
---

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title>{title}</title>
  <meta name="title" content={title}>
  <meta name="description" content={description}>
  <meta name="keywords" content={keywordsString}>
  <meta name="author" content="LTK Development Team">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <link rel="canonical" href={currentUrl}>
  
  <!-- Additional SEO Meta Tags -->
  <meta name="language" content="Japanese">
  <meta name="geo.region" content="JP">
  <meta name="geo.country" content="Japan">
  <meta name="distribution" content="global">
  <meta name="rating" content="general">
  <meta name="revisit-after" content="1 days">
  <meta name="subject" content="League of Legends Tournament">
  <meta name="topic" content="Esports, Gaming, Streaming">
  <meta name="summary" content="k4sen主催のLeague of Legendsストリーマー大会">
  <meta name="Classification" content="Gaming">
  <meta name="designer" content="LTK Development Team">
  <meta name="copyright" content="k4sen, ZETA DIVISION">
  <meta name="reply-to" content="">
  <meta name="owner" content="k4sen">
  <meta name="url" content={currentUrl}>
  <meta name="identifier-URL" content={currentUrl}>
  <meta name="directory" content="submission">
  <meta name="pagename" content={title}>
  <meta name="category" content="Esports">
  <meta name="coverage" content="Japan">
  <meta name="target" content="all">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="format-detection" content="telephone=no">
  
  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)}></script>
  
  <!-- FAQ Structured Data for enhanced search visibility -->
  <script type="application/ld+json" set:html={JSON.stringify(faqStructuredData)}></script>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content={currentUrl}>
  <meta property="og:title" content={title}>
  <meta property="og:description" content={description}>
  <meta property="og:image" content={ogImage}>
  <meta property="og:site_name" content="League The k4sen">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content={currentUrl}>
  <meta property="twitter:title" content={title}>
  <meta property="twitter:description" content={description}>
  <meta property="twitter:image" content={ogImage}>
  <meta property="twitter:creator" content="@thek4sen">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" href="/favicon.png">
  
  <!-- Resource Hints for Performance (Core Web Vitals) -->
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="dns-prefetch" href="//fonts.gstatic.com">
  
  <!-- Fonts with optimized loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap">
  
  <!-- Critical resource preloading -->
  <link rel="modulepreload" href="/src/layouts/Layout.astro">
  
  <!-- Theme Color -->
  <meta name="theme-color" content="#c89b3c">
  <meta name="msapplication-TileColor" content="#c89b3c">
  
  <!-- Tailwind CSS is automatically included by @astrojs/tailwind -->
</head>
<body class="min-h-screen bg-gradient-to-br from-primary via-secondary to-primary/80 text-gold font-japanese overflow-x-hidden scroll-smooth">
  <slot />
  
  <!-- Analytics -->
  <!-- Add analytics code here if needed -->
</body>
</html>

<style is:global>
  /* Screen reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-primary/20;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gold rounded-lg;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gold/80;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-2 outline-gold outline-offset-2;
  }
</style>